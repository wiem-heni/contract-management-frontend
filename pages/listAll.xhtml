<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ph="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Contrat</title>
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet"
	type="text/css" />
<link
	href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
	rel="stylesheet" />
<meta http-equiv="X-UA-Compatible"
	content="test/html; IE=edge; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />


<!-- Custom fonts for this template-->
<link href="../ressources/vendor/fontawesome-free/css/all.min.css"
	rel="stylesheet" type="text/css" />


<!-- Custom styles for this template-->
<link href="../ressources/css/sb-admin-2.min.css" rel="stylesheet" />

<link rel="icon" type="image/png" href="../ressources/img/favicon.png" />

<link
	href="../ressources/vendor/datatables/dataTables.bootstrap4.min.css"
	rel="stylesheet" />

</head>


<body id="page-top">


	<!-- Page Wrapper -->
	<div id="wrapper">

		<!-- Sidebar -->
		<ui:include src="menu.xhtml" />
		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<!-- Topbar -->
				<nav
					class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

				<!-- Sidebar Toggle (Topbar) -->
				<button id="sidebarToggleTop"
					class="btn btn-link d-md-none rounded-circle mr-3">
					<i class="fa fa-bars"></i>
				</button>

				<ui:include src="top.xhtml" /> </nav>

				<!-- Begin Page Content -->

				<div class="container-fluid">

					<!-- Page Heading -->
					<div
						class="d-sm-flex align-items-center justify-content-between mb-4">
						<h1 class="h3 mb-0 text-gray-800">Gestion Contrats ZTM</h1>
						<h:form>
							<h:commandLink
								class="d-none d-sm-inline-block btn btn-sm btn-info shadow-sm"
								action="#{contratController.ActionGoToCreateContratController}">
								<i class="fas fa-plus fa-sm text-white-50"></i> Ajouter Contrat</h:commandLink>
						</h:form>
					</div>
					<h:form>


						<div class="form-group row">
							<label class="col-sm-2 col-form-label text-gray-900">Co-Contractant:</label>
							<div class="col-sm-4">
								<h:selectOneMenu class="form-control" immediate="true"
									value="#{contratController.selectCo}" id="coValidate">
									<f:selectItem itemLabel="Saisir un cocontractant.."
										itemValue="#{null}" noSelectionOption="true" />
									<f:selectItems value="#{contratController.listAllCocon}"
										var="a" itemValue="#{a.id}" itemLabel="#{a.nom}" />
								</h:selectOneMenu>
							</div>



							<label class="col-sm-2 col-form-label text-gray-900">Objet
								contrat:</label>
							<div class="col-sm-4">
								<h:inputText class="form-control" id="objetValidate"
									value="#{contratController.ob}" ph:placeholder="objet" />

							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label text-gray-900">Catégorie</label>
							<div class="col-sm-4">
								<h:selectOneMenu class="form-control" immediate="true"
									value="#{contratController.selectItemCat}"
									id="categorieValidate">
									<f:selectItem itemLabel="Saisir une categorie.."
										itemValue="#{null}" noSelectionOption="true" />
									<f:selectItems value="#{contratController.listCategorie}"
										var="a" itemValue="#{a.id}" itemLabel="#{a.nom}" />
								</h:selectOneMenu>
							</div>
						</div>

						<div class="form-group row">

							<label class="col-sm-2 col-form-label text-gray-900">Date
								début:</label>
							<div class="col-sm-4" id="datepicker">
								<h:inputText class="form-control" id="datedValidate"
									value="#{contratController.dateD}">
									<f:convertDateTime type="date" pattern="dd-MM-yyyy" />


								</h:inputText>

							</div>


							<label class="col-sm-2 col-form-label text-gray-900">Date
								fin:</label>
							<div class="col-sm-4">
								<h:inputText styleClass="form-control datepicker"
									id="datefValidate" value="#{contratController.dateF}">
									<f:convertDateTime type="date" pattern="dd-MM-yyyy" />
								</h:inputText>

							</div>
						</div>

						<div class="form-group row">
							<label class="col-sm-2 col-form-label text-gray-900">Coût/Prix:</label>
							<div class="col-sm-4">
								<h:inputText class="form-control"
									value="#{contratController.prix}" ph:placeholder="coût/prix" />
							</div>

							<label class="col-sm-2 col-form-label text-gray-900">Année
								signature:</label>
							<div class="col-sm-4">
								<h:inputText class="form-control"
									value="#{contratController.ann}"
									ph:placeholder="Année signature" />
							</div>
						</div>
						<div class="form-group row">
							<label class="col-sm-2 col-form-label text-gray-900">Type
								contrat:</label>
							<div class="col-sm-4">
								<h:selectOneRadio value="#{contratController.typeRecherche}"
									id="type">

									<f:selectItem itemLabel="Ferme" itemValue="Ferme"></f:selectItem>
									<f:selectItem itemLabel="Renouvelable" itemValue="Renouvelable"></f:selectItem>
									<f:selectItem itemLabel="Tous" itemValue="Tous"></f:selectItem>

								</h:selectOneRadio>
							</div>
							<label class="col-sm-2 col-form-label text-gray-900"></label>
							<div class="col-sm-4">



								<h:commandLink
									class="d-none d-sm-inline-block btn btn-sm btn-warning shadow-sm"
									actionListener="#{contratController.ActionRechercherParCritereController}">
									<i class="fas fa-search fa-sm text-white-50"></i>Rechercher</h:commandLink>


							</div>

						</div>

					</h:form>


					<div class="card shadow mb-4">

						<div class="card-header py-3">
							<h6 class="m-0 font-weight-bold text-primary">Liste des
								contrats</h6>

						</div>
						<div class="card-body">


							<div class="table-responsive">

								<h:form id="formt">

									<table class="table table-bordered table-striped "
										id="dataTable" width="100%" cellspacing="0">
										<thead>
											<tr>
												<th>N°</th>
												<th>Statut</th>
												<th>Contractant</th>
												<th>Objet</th>
												<th>Catégorie</th>
												<th>Type</th>
												<th>Debut</th>
												<th>Fin</th>
												<th></th>
												<th></th>
												<th></th>



											</tr>

										</thead>

										<tbody>
											<ui:repeat var="c" value="#{contratController.listRecherche}">
												<tr>
													<td>#{c.codeContrat}</td>
													<c:set var="mystring" value="#{c.etatContrat}" />
<h:panelGroup rendered="#{mystring eq 'expiré'}"><td><h:commandButton value="#{c.etatContrat}" style="width: 193px; border-radius: 4px;"  styleClass="btn-danger" disabled="true"></h:commandButton></td>
												
</h:panelGroup>
<h:panelGroup rendered="#{mystring.contains('cours')}">
													<td><h:commandButton value="#{c.etatContrat}"  styleClass="btn-info" disabled="true" style="width: 193px;border-radius: 4px;" ></h:commandButton></td>
</h:panelGroup>
<h:panelGroup rendered="#{mystring.contains('avant préavis')}">
													<td><h:commandButton value="#{c.etatContrat}" styleClass="btn-warning" disabled="true" style="width: 193px;border-radius: 4px;" ></h:commandButton></td>
</h:panelGroup>
<h:panelGroup rendered="#{mystring.contains('avant expiration')}">
													<td><h:commandButton value="#{c.etatContrat}"  styleClass="btn-warning" style="width: 193px;border-radius: 4px;"  disabled="true"></h:commandButton></td>
</h:panelGroup>
<h:panelGroup rendered="#{mystring eq 'atteint préavis'}">
													<td><h:commandButton value="#{c.etatContrat}"  style="width: 193px;border-radius: 4px;"  styleClass="btn-danger" disabled="true"></h:commandButton></td>
</h:panelGroup>
<h:panelGroup rendered="#{mystring eq 'annulé'}">
													<td><h:commandButton value="#{c.etatContrat}" style="width: 193px;border-radius: 4px;" styleClass="btn-success" disabled="true"></h:commandButton></td>
</h:panelGroup>



													<td>#{c.cocontractant.nom}</td>
													<td>#{c.objetContrat}</td>
													<td>#{c.categorie.nom}</td>
													<td>#{c.typeContrat}</td>
													<td>#{c.dateDebut}</td>
													<td>#{c.dateFin}</td>
													<td><h:commandLink
															class="btn-circle btn-warning btn-sm"
															action="#{contratController.ActionGoToUpdateContrat}">
															<f:setPropertyActionListener value="#{c}"
																target="#{contratController.contrat}"></f:setPropertyActionListener>
															<i class="fas fa-edit"></i>
														</h:commandLink></td>
													<td><h:commandLink
															class="btn-circle btn-success btn-sm"
															action="#{contratController.ActionGoToAfficherContratController}">
															<f:setPropertyActionListener value="#{c}"
																target="#{contratController.contrat}"></f:setPropertyActionListener>
															<i class="fas fa-eye"></i>
														</h:commandLink></td>
													<td><h:commandLink class="btn-circle btn-info btn-sm"
															action="#{contratController.ActionGoToHistorique}">
															<f:setPropertyActionListener value="#{c}"
																target="#{contratController.contrat}"></f:setPropertyActionListener>
															<i class="fas fa-history"></i>
														</h:commandLink></td>
														
												</tr>
											</ui:repeat>
										</tbody>
									</table>
								</h:form>


							</div>
						</div>
					</div>


				</div>

			</div>
		</div>
		<!-- /.container-fluid -->

	</div>
	<a class="scroll-to-top rounded" href="#page-top"> <i
		class="fas fa-angle-up"></i>
	</a>
	<!-- Bootstrap core JavaScript-->
	<script src="../ressources/vendor/jquery/jquery.min.js"></script>
	<script src="../ressources/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Core plugin JavaScript-->
	<script src="../ressources/vendor/jquery-easing/jquery.easing.min.js"></script>

	<script src="../ressources/vendor/datatables/jquery.dataTables.min.js"></script>
	<script
		src="../ressources/vendor/datatables/dataTables.bootstrap4.min.js"></script>

	<!-- Page level custom scripts -->
	<script src="../ressources/js/demo/datatables-demo.js"></script>
	<script src="../ressources/js/sb-admin-2.min.js"></script>

</body>
</html>