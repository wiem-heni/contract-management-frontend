<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jstl/core">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Contrat</title>

<meta http-equiv="X-UA-Compatible"
	content="test/html; IE=edge; charset=utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />


<!-- Custom fonts for this template-->
<link href="../ressources/vendor/fontawesome-free/css/all.min.css"
	rel="stylesheet" type="text/css" />


<!-- Custom styles for this template-->
<link href="../ressources/css/sb-admin-2.min.css" rel="stylesheet" />

<link rel="icon" type="image/png" href="../ressources/img/favicon.png" />

<link
	href="../ressources/vendor/datatables/dataTables.bootstrap4.min.css"
	rel="stylesheet" />

</head>


<body id="page-top">


	<!-- Page Wrapper -->
	<div id="wrapper">

		<!-- Sidebar -->
		<ui:include src="menu.xhtml" />
		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<!-- Topbar -->
				<nav
					class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

				<!-- Sidebar Toggle (Topbar) -->
				<button id="sidebarToggleTop"
					class="btn btn-link d-md-none rounded-circle mr-3">
					<i class="fa fa-bars"></i>
				</button>



				<!-- Topbar Navbar -->
				<ul class="navbar-nav ml-auto">

					<!-- Dropdown - Alerts -->
					<!-- Nav Item - Alerts -->
					<li class="nav-item dropdown no-arrow mx-1"><a
						class="nav-link dropdown-toggle" href="#" id="alertsDropdown"
						role="button" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false"> <i class="fas fa-bell fa-fw"></i> <!-- Counter - Alerts -->
							<span class="badge badge-danger badge-counter">10+</span>
					</a> <!-- Dropdown - Alerts -->
						<div
							class="dropdown-list dropdown-menu dropdown-menu-right shadow animated--grow-in"
							aria-labelledby="alertsDropdown">
							<h6 class="dropdown-header">Alerts Center</h6>
							<a class="dropdown-item d-flex align-items-center" href="#">
								<div class="mr-3">
									<div class="icon-circle bg-success">
										<i class="fas fa-file-alt text-white"></i>
									</div>
								</div>
								<div>
									<div class="small text-gray-500">December 12, 2019</div>
									<span class="font-weight-bold">A new monthly report is
										ready to download!</span>
								</div>
							</a> <a class="dropdown-item text-center small text-gray-500"
								href="#">Show All Alerts</a>
						</div></li>


					<div class="topbar-divider d-none d-sm-block"></div>
					<!-- Nav Item - User Information -->
					<h:form>
						<li class="nav-item dropdown no-arrow"><a
							class="nav-link dropdown-toggle" href="#" id="userDropdown"
							role="button" data-toggle="dropdown" aria-haspopup="true"
							aria-expanded="false"><span
								class="mr-2 d-none d-lg-inline text-gray-600 small">
							<h:outputLabel value="#{loginController.name}"></h:outputLabel></span> <img
								class="img-profile rounded-circle"
								src="../ressources/img/user1.png" /></a> <!-- Dropdown - User Information -->
							<div
								class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
								aria-labelledby="userDropdown">

								<h:commandLink value="Profil" class="dropdown-item"
									style="text-align: center;" data-toggle="modal">
									<i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
								</h:commandLink>
								<h:commandLink value="Paramètres" class="dropdown-item"
									style="text-align: center;" data-toggle="modal">
									<i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
								</h:commandLink>
								<div class="dropdown-divider"></div>
								<h:commandLink value="Déconnexion" class="dropdown-item"
									data-toggle="modal"
									actionListener="#{loginController.actionLogoutController}">
									<i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
								</h:commandLink>

							</div></li>
					</h:form>
				</ul>

				</nav>
				<!-- End of Topbar -->

				<!-- Begin Page Content -->

				<div class="container-fluid">

					<!-- Page Heading -->
					<div
						class="d-sm-flex align-items-center justify-content-between mb-4">
						<h1 class="h3 mb-0 text-gray-800">Gestion Contrats ZTM</h1>
						<h:form>
							<h:commandLink
								class="d-none d-sm-inline-block btn btn-sm btn-info shadow-sm"
								action="#{contratController.ActionGoToCreateContratController}">
								<i class="fas fa-plus fa-sm text-white-50"></i> Ajouter Contrat</h:commandLink>
						</h:form>
					</div>

					<div class="row">

						<!-- Earnings (Monthly) Card Example -->
						<div class="col-xl-3 col-md-6 mb-4">
							<div class="card border-left-primary shadow h-100 py-2">
								<div class="card-body">
									<div class="row no-gutters align-items-center">
										<div class="col mr-2">
											<div
												class="text-xs font-weight-bold text-primary text-uppercase mb-1">
												<h:form>
													<h:commandLink
														value="Contrats renouvelables atteints préavis"
														class="text-xs font-weight-bold text-primary text-uppercase mb-1"
														action="#{contratController.ActionGoToListRenouvelableAtteintPreavisController}"></h:commandLink>
												</h:form>
											</div>
											<div class="h5 mb-0 font-weight-bold text-gray-800">

												<h:outputText
													value="#{contratController.nbContratRenouvelableAtteintPreavis}"></h:outputText>


											</div>
										</div>
										<div class="col-auto">
											<i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Earnings (Monthly) Card Example -->
						<div class="col-xl-3 col-md-6 mb-4">
							<div class="card border-left-success shadow h-100 py-2">
								<div class="card-body">
									<div class="row no-gutters align-items-center">
										<div class="col mr-2">
											<div
												class="text-xs font-weight-bold text-success text-uppercase mb-1">
												<h:form>
													<h:commandLink
														value="Renouvelables dont le preavis est dans -30 jours"
														class="text-xs font-weight-bold text-success text-uppercase mb-1"
														action="#{contratController.ActionGoToListRenouvelableAvantPreavisController}"></h:commandLink>
												</h:form>
											</div>
											<div class="h5 mb-0 font-weight-bold text-gray-800">
												<h:outputText
													value="#{contratController.nbContratRenouvelableAvantPreavis}"></h:outputText>
											</div>
										</div>
										<div class="col-auto">
											<i class="fas fa-calendar fa-2x text-gray-300"></i>
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Earnings (Monthly) Card Example -->
						<div class="col-xl-3 col-md-6 mb-4">
							<div class="card border-left-info shadow h-100 py-2">
								<div class="card-body">
									<div class="row no-gutters align-items-center">
										<div class="col mr-2">
											<div
												class="text-xs font-weight-bold text-info text-uppercase mb-1">
												<h:form>
													<h:commandLink value="Renouvelables expirés dans -30 jours"
														class="text-xs font-weight-bold text-info text-uppercase mb-1"
														action="#{contratController.ActionGoToListRenouvelableAvantExpirationController}"></h:commandLink>
												</h:form>
											</div>
											<div class="row no-gutters align-items-center">
												<div class="col-auto">
													<div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">
														<h:outputText
															value="#{contratController.nbContratRenouvelableAvantExpiration}"></h:outputText>
													</div>
												</div>

											</div>
										</div>
										<div class="col-auto">
											<i class="fas fa-calendar fa-2x text-gray-300"></i>
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Pending Requests Card Example -->
						<div class="col-xl-3 col-md-6 mb-4">
							<div class="card border-left-warning shadow h-100 py-2">
								<div class="card-body">
									<div class="row no-gutters align-items-center">
										<div class="col mr-2">
											<div
												class="text-xs font-weight-bold text-warning text-uppercase mb-1">

												Contrats expirés"</div>
											<div class="h5 mb-0 font-weight-bold text-gray-800">
												<h:outputText value="#{contratController.nbContratExpirer}"></h:outputText>
											</div>
										</div>
										<div class="col-auto">
											<i class="fas fa-times-circle fa-2x text-gray-300"></i>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="card shadow mb-4">

						<div class="card-header py-3">
							<h6 class="m-0 font-weight-bold text-primary">Liste des
								contrats</h6>

						</div>
						<div class="card-body">
							<div class="table-responsive">
								<h:form id="formt">

									<table class="table table-bordered table-striped "
										id="dataTable" width="100%" cellspacing="0">
										<thead>
											<tr>
												<th>N°</th>
												<th>Statut</th>
												<th>Contractant</th>
												<th>Objet</th>
												<th>Catégorie</th>
												<th>Type</th>
												<th>Debut</th>
												<th>Fin</th>
												<th></th>
												<th></th>
												<th></th>



											</tr>

										</thead>

										<tbody>
											<ui:repeat var="c"
												value="#{contratController.listAllContrats}">
												<tr>
													<td>#{c.codeContrat}</td>
													
													<td><h:commandButton
										styleClass="btn btn-success"
										value="#{c.etatContrat}" disabled="true">
									</h:commandButton></td>
									
													<td>#{c.cocontractant.nom}</td>
													<td>#{c.objetContrat}</td>
													<td>#{c.categorie.nom}</td>
													<td>#{c.typeContrat}</td>
													<td>#{c.dateDebut}</td>
													<td id="dt">#{c.dateFin}</td>
													<td><h:commandLink
															class="btn-circle btn-warning btn-sm"
															action="#{contratController.ActionGoToUpdateContrat}">
															<f:setPropertyActionListener value="#{c}"
																target="#{contratController.contrat}"></f:setPropertyActionListener>
															<i class="fas fa-edit"></i>
														</h:commandLink></td>
													<td><h:commandLink
															class="btn-circle btn-success btn-sm"
															action="#{contratController.ActionGoToAfficherContratController}">
															<f:setPropertyActionListener value="#{c}"
																target="#{contratController.contrat}"></f:setPropertyActionListener>
															<i class="fas fa-eye"></i>
														</h:commandLink></td>
													<td><h:commandLink class="btn-circle btn-info btn-sm"
															action="#{contratController.ActionGoToHistorique}">
															<f:setPropertyActionListener value="#{c}"
																target="#{contratController.contrat}"></f:setPropertyActionListener>
															<i class="fas fa-history"></i>
														</h:commandLink></td>
												</tr>
											</ui:repeat>
										</tbody>
									</table>
								</h:form>


							</div>
						</div>
					</div>


				</div>


			</div>
		</div>
		<!-- /.container-fluid -->
<h:form><h:commandLink value="exporter" actionListener="#{writeDataToCSVFile.ActionExport}"></h:commandLink></h:form>
	</div>
	<!-- Bootstrap core JavaScript-->
	<script src="../ressources/vendor/jquery/jquery.min.js"></script>
	<script src="../ressources/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Core plugin JavaScript-->
	<script src="../ressources/vendor/jquery-easing/jquery.easing.min.js"></script>

	<script src="../ressources/vendor/datatables/jquery.dataTables.min.js"></script>
	<script
		src="../ressources/vendor/datatables/dataTables.bootstrap4.min.js"></script>

	<!-- Page level custom scripts -->
	<script src="../ressources/js/demo/datatables-demo.js"></script>
			  <script src="../ressources/js/sb-admin-2.min.js"></script>
	

</body>
</html>